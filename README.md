# ЦСЯ инструментарий

Спецификация минимального, но полного инструментария для создания, правки и хранения документов
на церковнославянском языке.

1. Формат хранения - вариант Markdown
2. Кодировка - Unicode

Инструменты:

1. Экранный шрифт ЦСЯ. Шрифт фиксированной ширины, где все надстрочные и управляющие Unicode символы
   отображаются линейно. Такой шрифт решает проблему читаемости "трехэтажных" выносных символов часто
   встречающихся в ЦСЯ текстах. И снимает вопрос "в каком порядке это набрано?". Предполагается
   использование этого шрифта в текстовом редакторе для редактирования ЦСЯ Markdown.
2. Доработка имеющихся Unicode шрифтов с целью гармонизации с ЦСЯ блоками других часто используемых
   языков - русского, греческого, и латиницы (вес и размер букв, межбуквенное расстояние).
   Снимает необходимость переключения шрифта при публикации в HTML/PDF.
3. Конвертер из ЦСЯ Markdown в
   * HTML
   * LaTeX
   * XML
   * PDF?
4. Драйверы клавиатуры для ввода ЦСЯ текстов. Это может быть как драйвер уровня операционной системы,
   так и просто виртуальной клавиатурой (то есть реализованной внутри приложения). Желательно
   иметь возможность пользователю задать "горячие" клавиши для ввода частых комбинаций. Для
   тех кто имеет навыки работы с HIP, предоставить совместимый с HIP набор горячих клавиш.
   Например, ввод "\д" автоматически раскрывается в последовательность Unicode символов для
   представления надстрочного титла "д".

## Специальные разделы

### Спецификация ЦСЯ Markdown

1. Как и в любом варианте Markdown, блоки разделяются пустой строкой.
2. Разметка внутри блока - по возможности логическая, а не визуальная. Например, "красная
   буква" помечается префиксом "~", при этом окрашивается первая буква и все принадлежащие к ней
   выносные символы. Подобно этому, выделение `**``xxx``**` при преобразовании в публикуемый
   формат может быть стилизовано как разрядка, или киноварь, или что-нибудь ещё.
3. Документ может иметь (необязательный) YAML-заголовок. Заголовок не отображается при публикации,
   но позволяет указать мета-информацию. Например, отсылку к сканам исходного текста, редакторские
   пометы, стили отображения, место в литургической таксономии. Мета-информация представляется в
   виде `ключ: значение` (каждый ключ на своей строке YAML-заголовка).
4. Блок может иметь индивидуальную мета-информацию в виде кострукции `(:: мета ::)`. Где `мета` -
   это набор выражений `ключ: значение; ключ: значение`. Этот механизм позволяет задавать блоку
   текста произвольные ключи (подобно тому как YAML-заголовок задает ключи для файла в целом).
   Мета-информация блока может помещаться непосредственно до или после блока (не должно быть
   пустой строки между текстом блока и мета-описанием). Мета-информация блока перестает
   действовать с окончанием блока.
5. Markdown текст может иметь отдельно-стоящие мета-описатели (пустая строка до и после мета).
   В этом случае описанные в мета ключи будут действовать на все последующие блоки до конца файла.
6. По соглашению каждое новое предложение в блоке начинается с новой строки без ведущих пробелов.
   Если предложение очень длинное, его разбивают на несколько строк, но строки продолжения
   начинаются с одного или наскольких пробелов.

### Целевое назначение ЦСЯ текста

1. Библиографическое - цифровое отображение печатного издания. YAML будет иметь библиографические
   данные печатного издания, отсылку к базе данных
   постраничных сканов и, возможно, интервал страниц представленных в файле. Обязательно использование
   меток страниц в тексте (чтобы можно было автоматически запросить картинку с данным блоком).
   В некоторых случаях мета-информация блока может даже содержать геометрические координаты
   блока на картинке. Правки ошибок распознования и опечаток должны быть документированы.
2. Цифровой документ (компиляция, редакторская обработка, или создание нового документа). Это
   по сути оригинальное (цифровое) издание. Связь с источниками условная и (если есть) может быть описана
   в тексте или мета-данных. Метки страниц не используются. Редакторские изменения отслеживаются
   средствами git.